//clip test

images
{
        /* definition des images */
        image: "calaos_touchscreen.png" COMP;
        image: "calaos_server.png" COMP;
}

collections
{
        group
        {
                name: "test_clip";
                min: 500 500;

                parts
                {
                        part
                        {
                                name: "bg";
                                type: RECT;
                                description
                                {
                                        state: "default" 0.0;
                                        color: 255 255 255 255;
                                }
                        }

//--------------------------------------------------------------------------

                        //le conteneur permet de positionner des éléments en une fois
                        part
                        {
                                name: "container";
                                type: RECT;
                                description
                                {
                                        state: "default" 0.0;
                                        color: 0 0 0 0; //cache le conteneur
                                        rel1
                                        {
                                                relative: 0.2 0.2;
                                                offset: 0 0;
                                        }
                                        rel2
                                        {
                                                relative: 0.2 0.2;
                                                offset: 40 40;
                                        }
                                }
                                description
                                {
                                        state: "move" 0.0;
                                        color: 0 0 0 0;
                                        rel1
                                        {
                                                relative: 0.6 0.6;
                                                offset: 0 0;
                                        }
                                        rel2
                                        {
                                                relative: 0.6 0.6;
                                                offset: 40 40;
                                        }
                                }
                        }

                        //une fois qu'un objet est clipé a un autre, celui ci disparait
                        //les objets clipé prennent alors les propriété de couleur du "clip"
                        //le clip définit aussi une zone, les objets ne pourront pas sortir de
                        //cette zone
                        part
                        {
                                name: "clip";
                                type: RECT;
                                description
                                {
                                        state: "default" 0.0;
                                        rel1.relative: 0.3 0.3;
                                        rel2.relative: 0.5 0.5;
                                }
                        }

                        part
                        {
                                name: "object";
                                clip_to: "clip";
                                description
                                {
                                        state: "default" 0.0;
                                        rel1.to: "container";
                                        rel2.to: "container";
                                        image.normal: "calaos_touchscreen.png";
                                }
                        }

//---------------------------------------------------------------------

                        part
                        {
                                name: "container2";
                                type: RECT;
                                description
                                {
                                        state: "default" 0.0;
                                        color: 0 0 0 0; //cache le conteneur
                                        rel1
                                        {
                                                relative: 0.7 0.7;
                                                offset: 0 0;
                                        }
                                        rel2
                                        {
                                                relative: 1.0 1.0;
                                                offset: 0 0;
                                        }
                                }
                        }
                        part
                        {
                                name: "clip2";
                                type: RECT;
                                description
                                {
                                        state: "default" 0.0;
                                        rel1.relative: 0.6 0.6;
                                        rel2.relative: 0.9 0.9;
                                        color: 255 255 255 0;
                                }
                                description
                                {
                                        state: "anim1" 0.0;
                                        inherit: "default" 0.0;
                                        color: 255 255 255 255;
                                }
                                description
                                {
                                        state: "anim2" 0.0;
                                        inherit: "default" 0.0;
                                        color: 255 0 255 255;
                                }
                                description
                                {
                                        state: "anim3" 0.0;
                                        inherit: "default" 0.0;
                                        color: 0 255 255 255;
                                }
                        }
                        part
                        {
                                name: "object2";
                                clip_to: "clip2";
                                description
                                {
                                        state: "default" 0.0;
                                        rel1.to: "container2";
                                        rel2.to: "container2";
                                        image.normal: "calaos_server.png";
                                }
                        }
//-----------------------------------------------------------------------
                }

                programs
                {
                        program
                        {
                                name: "show";
                                signal: "show";
                                source: "";
                                after: "anim1";
                                after: "anim1.1";
                        }
                        //---------------------------------------
                        program
                        {
                                name: "anim1";
                                action: STATE_SET "move" 0.0;
                                transition: ACCELERATE 2.0;
                                target: "container";
                                after: "anim1.loop";
                        }
                        program
                        {
                                name: "anim1.loop";
                                action: STATE_SET "default" 0.0;
                                transition: ACCELERATE 2.0;
                                target: "container";
                                after: "anim1";
                        }
                        //---------------------------------------
                        program
                        {
                                name: "anim1.1";
                                action: STATE_SET "anim1" 0.0;
                                transition: LINEAR 1.0;
                                target: "clip2";
                                after: "anim1.2";
                        }
                        program
                        {
                                name: "anim1.2";
                                action: STATE_SET "anim2" 0.0;
                                transition: LINEAR 1.0;
                                target: "clip2";
                                after: "anim1.3";
                        }
                        program
                        {
                                name: "anim1.3";
                                action: STATE_SET "anim3" 0.0;
                                transition: LINEAR 1.0;
                                target: "clip2";
                                after: "anim1.4";
                        }
                        program
                        {
                                name: "anim1.4";
                                action: STATE_SET "default" 0.0;
                                transition: LINEAR 1.0;
                                target: "clip2";
                                after: "anim1.1";
                        }
                }
        }
}
